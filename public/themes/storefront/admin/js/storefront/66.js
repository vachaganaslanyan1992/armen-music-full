"use strict";(self.webpackChunkfleetcart=self.webpackChunkfleetcart||[]).push([[66],{66:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});function i(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}const o={mixins:[s(114).Z],props:["categories","mostSearchedKeywords","isMostSearchedKeywordsEnabled","initialQuery","initialCategory"],data:function(){return{activeSuggestion:null,showSuggestions:!1,form:{query:this.initialQuery,category:this.initialCategory},suggestions:{categories:[],products:[],remaining:0}}},computed:{initialCategoryIsNotInCategoryList:function(){return!this.categories.includes(this.initialCategory)},shouldShowSuggestions:function(){return!!this.showSuggestions&&this.hasAnySuggestion},moreResultsUrl:function(){return this.form.category?route("categories.products.index",this.form):route("products.index",{query:this.form.query})},hasAnySuggestion:function(){return 0!==this.suggestions.products.length},allSuggestions:function(){return[].concat(i(this.suggestions.categories),i(this.suggestions.products))},firstSuggestion:function(){return this.allSuggestions[0]},lastSuggestion:function(){return this.allSuggestions[this.allSuggestions.length-1]}},watch:{"form.query":function(t){""===t?this.clearSuggestions():(this.showSuggestions=!0,this.fetchSuggestions())}},methods:{changeCategory:function(t){this.form.category=t,this.fetchSuggestions()},fetchSuggestions:function(){var t=this;$.ajax({method:"GET",url:route("suggestions.index",this.form)}).then((function(e){t.suggestions.categories=e.categories,t.suggestions.products=e.products,t.suggestions.remaining=e.remaining,t.clearActiveSuggestion(),t.resetSuggestionScrollBar()}))},search:function(){if(this.form.query)return this.activeSuggestion?(window.location.href=this.activeSuggestion.url,void this.hideSuggestions()):void(this.form.category?window.location.href=route("categories.products.index",this.form):window.location.href=route("products.index",{query:this.form.query}))},clearSuggestions:function(){this.suggestions.categories=[],this.suggestions.products=[]},hideSuggestions:function(t){this.showSuggestions=!1,this.clearActiveSuggestion()},isActiveSuggestion:function(t){return!!this.activeSuggestion&&this.activeSuggestion.slug===t.slug},changeActiveSuggestion:function(t){this.activeSuggestion=t},clearActiveSuggestion:function(){this.activeSuggestion=null},nextSuggestion:function(){this.hasAnySuggestion&&(this.activeSuggestion=this.allSuggestions[this.nextSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.firstSuggestion),this.adjustSuggestionScrollBar())},prevSuggestion:function(){this.hasAnySuggestion&&(-1!==this.prevSuggestionIndex()?(this.activeSuggestion=this.allSuggestions[this.prevSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.lastSuggestion),this.adjustSuggestionScrollBar()):this.clearActiveSuggestion())},nextSuggestionIndex:function(){return this.currentSuggestionIndex()+1},prevSuggestionIndex:function(){return this.currentSuggestionIndex()-1},currentSuggestionIndex:function(){return this.allSuggestions.indexOf(this.activeSuggestion)},adjustSuggestionScrollBar:function(){this.$refs.searchSuggestionsInner.scrollTop=this.$refs[this.activeSuggestion.slug][0].offsetTop-200},resetSuggestionScrollBar:function(){this.$refs.searchSuggestionsInner.scrollTop=0}}};const r=(0,s(900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSuggestions,expression:"hideSuggestions"}],staticClass:"header-search-wrap"},[s("div",{staticClass:"header-search"},[s("form",{staticClass:"search-form",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[s("div",{staticClass:"header-search-lg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.query,expression:"form.query"}],staticClass:"form-control search-input",attrs:{type:"text",name:"query",autocomplete:"off",placeholder:t.$trans("storefront::layout.search_for_products")},domProps:{value:t.form.query},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideSuggestions.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.nextSuggestion.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.prevSuggestion.apply(null,arguments)}],input:function(e){e.target.composing||t.$set(t.form,"query",e.target.value)}}}),t._v(" "),s("div",{staticClass:"header-search-right",on:{focusin:t.hideSuggestions}},[s("select",{staticClass:"header-search-select custom-select-option arrow-black",attrs:{name:"category"},on:{"nice-select-updated":function(e){return t.changeCategory(e.target.value)}}},[s("option",{attrs:{value:""},domProps:{selected:t.initialCategoryIsNotInCategoryList}},[t._v("\n                            "+t._s(t.$trans("storefront::layout.all_categories"))+"\n                        ")]),t._v(" "),t._l(t.categories,(function(e){return s("option",{key:e.slug,domProps:{value:e.slug,selected:e.slug===t.initialCategory}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2),t._v(" "),t._m(0)])]),t._v(" "),t._m(1)]),t._v(" "),Boolean(t.isMostSearchedKeywordsEnabled)&&0!==t.mostSearchedKeywords.length?s("div",{staticClass:"searched-keywords"},[s("label",[t._v("\n                "+t._s(t.$trans("storefront::layout.most_searched"))+"\n            ")]),t._v(" "),s("ul",{staticClass:"list-inline searched-keywords-list"},t._l(t.mostSearchedKeywords,(function(e,i){return s("li",{key:i},[s("a",{attrs:{href:t.route("products.index",{query:e})}},[t._v("\n                        "+t._s(e)+"\n                    ")])])})),0)]):t._e()]),t._v(" "),s("div",{staticClass:"header-search-sm-form"},[s("form",{staticClass:"search-form",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[t._m(2),t._v(" "),s("input",{staticClass:"form-control search-input-sm",attrs:{type:"text",name:"query",autocomplete:"off",placeholder:t.$trans("storefront::layout.search_for_products")},domProps:{value:t.form.query},on:{input:function(e){t.form.query=e.target.value},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideSuggestions.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.nextSuggestion.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.prevSuggestion.apply(null,arguments)}]}}),t._v(" "),t._m(3)])]),t._v(" "),t.shouldShowSuggestions?s("div",{staticClass:"search-suggestions"},[s("div",{ref:"searchSuggestionsInner",staticClass:"search-suggestions-inner custom-scrollbar"},[0!==t.suggestions.categories.length?s("div",{staticClass:"category-suggestion"},[s("h6",{staticClass:"title"},[t._v("\n                    "+t._s(t.$trans("storefront::layout.category_suggestions"))+"\n                ")]),t._v(" "),s("ul",{staticClass:"list-inline category-suggestion-list"},t._l(t.suggestions.categories,(function(e){return s("li",{key:e.slug,ref:e.slug,refInFor:!0,staticClass:"list-item",class:{active:t.isActiveSuggestion(e)},on:{mouseover:function(s){return t.changeActiveSuggestion(e)},mouseleave:t.clearActiveSuggestion}},[s("a",{staticClass:"single-item",attrs:{href:e.url},domProps:{textContent:t._s(e.name)},on:{click:t.hideSuggestions}})])})),0)]):t._e(),t._v(" "),s("div",{staticClass:"product-suggestion"},[s("h6",{staticClass:"title"},[t._v("\n                    "+t._s(t.$trans("storefront::layout.product_suggestions"))+"\n                ")]),t._v(" "),s("ul",{staticClass:"list-inline product-suggestion-list"},t._l(t.suggestions.products,(function(e){return s("li",{key:e.slug,ref:e.slug,refInFor:!0,staticClass:"list-item",class:{active:t.isActiveSuggestion(e)},on:{mouseover:function(s){return t.changeActiveSuggestion(e)},mouseleave:t.clearActiveSuggestion}},[s("a",{staticClass:"single-item",attrs:{href:e.url},on:{click:t.hideSuggestions}},[s("div",{staticClass:"product-image"},[s("img",{class:{"image-placeholder":!t.hasBaseImage(e)},attrs:{src:t.baseImage(e),alt:"product image"}})]),t._v(" "),s("div",{staticClass:"product-info"},[s("div",{staticClass:"product-info-top"},[s("h6",{staticClass:"product-name",domProps:{innerHTML:t._s(e.name)}}),t._v(" "),e.is_out_of_stock?s("ul",{staticClass:"list-inline product-badge"},[s("li",{staticClass:"badge badge-danger"},[t._v("\n                                            "+t._s(t.$trans("storefront::product_card.out_of_stock"))+"\n                                        ")])]):t._e()]),t._v(" "),s("div",{staticClass:"product-price",domProps:{innerHTML:t._s(e.formatted_price)}})])])])})),0),t._v(" "),0!==t.suggestions.remaining?s("a",{staticClass:"more-results",attrs:{href:t.moreResultsUrl},on:{click:t.hideSuggestions}},[t._v("\n                    "+t._s(t.$trans("storefront::layout.more_results",{count:this.suggestions.remaining}))+"\n                ")]):t._e()])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-primary btn-search",attrs:{type:"submit"}},[e("i",{staticClass:"las la-search"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-search-sm"},[e("i",{staticClass:"las la-search"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-close"},[e("i",{staticClass:"las la-arrow-left"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-search",attrs:{type:"submit"}},[e("i",{staticClass:"las la-search"})])}],!1,null,null,null).exports}}]);
//# sourceMappingURL=66.js.map